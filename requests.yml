---
- name: nixpigweb
  host: localhost
  port: 8081
  requests:
    - name: login_success
      resource: /api/auth/login
      method: post
      body:
        username: nixpig
        password: p4ssw0rd

    - name: login_fail_un
      resource: /api/auth/login
      method: post
      body:
        username: nonexistent
        password: sd0932jf

    - name: login_fail_pw
      resource: /api/auth/login
      method: post
      body:
        username: nixpig
        password: sd0932jf

    - name: create_new_user
      resource: /api/user
      method: post
      # auth: !bearer
      #   token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDA5MTIyNjYsImlzX2FkbWluIjp0cnVlLCJ1c2VyX2lkIjoyfQ.ZOlQchnNrzemU4ehBucoy0ZrRVeskEcWu-Vtn8VW5YE
      body:
        username: nixpig
        email: test@nixpig.dev
        password: p4ssw0rd

    - name: get_users
      resource: /api/user

    - name: get_user_by_id
      resource: /api/user/7

    - name: get_content
      resource: /api/content

    - name: get_content_by_id
      resource: /api/content/24

    - name: create_page_content
      resource: /api/content
      method: post
      body:
        title: About
        subtitle: About nixpig.dev
        body: This needs to be filled with some stuff about me and the site.
        type: page
      auth: !bearer
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDIxNDY0MjMsImlzX2FkbWluIjpmYWxzZSwidXNlcl9pZCI6MX0.QVw4NNEsMTZXRP_-NaSSsGxCG8_cq-YyDPiTjxX2O1c

    - name: create_post_content
      resource: /api/content
      method: post
      body:
        title: Dynamically accessing a struct field in Rust
        subtitle: Some subtitle in here
        body: Some body content to fill up in here.
        type: post
      auth: !bearer
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDIxNDY0MjMsImlzX2FkbWluIjpmYWxzZSwidXNlcl9pZCI6MX0.QVw4NNEsMTZXRP_-NaSSsGxCG8_cq-YyDPiTjxX2O1c

    - name: create_content_not_authed
      resource: /api/content
      method: post
      body:
        title: Not authed post title
        subtitle: This shouldn't work
        body: Some unauthed body content
        type: post

    - name: delete_content_by_id_not_authed
      resource: /api/content/24
      method: delete

    - name: delete_content_by_id
      resource: /api/content/24
      method: delete
      auth: !bearer
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDIxNDY0MjMsImlzX2FkbWluIjpmYWxzZSwidXNlcl9pZCI6MX0.QVw4NNEsMTZXRP_-NaSSsGxCG8_cq-YyDPiTjxX2O1c

    - name: update_content_not_authed
      resource: /api/content/25
      method: patch
      body:
        id: 14
        title: Some title updated
        subtitle: Updated subtitle
        body: Updated body content in here.
        type: page

    - name: update_content
      resource: /api/content/25
      method: patch
      body:
        id: 25
        title: Some title updated
        subtitle: Updated subtitle
        body: Updated body content in here.
        type: page
      auth: !bearer
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDIxNDY0MjMsImlzX2FkbWluIjpmYWxzZSwidXNlcl9pZCI6MX0.QVw4NNEsMTZXRP_-NaSSsGxCG8_cq-YyDPiTjxX2O1c
